{"version":3,"sources":["../src/index.ts","../src/resources/sandbox.ts","../src/core/error.ts","../src/core/client.ts"],"sourcesContent":["export { VyomaClient } from \"./core/client\";\nexport * from \"./types\";\n","import { VyomaClient } from \"../core/client\";\nimport {\n  SandboxCreateRequest,\n  SandboxCreateResponse,\n  SandboxStatusResponse,\n  SandboxStopResponse,\n  SandboxWriteResponse,\n  SandboxExecResponse,\n} from \"../types/sandbox\";\n\nexport class SandboxResource {\n  constructor(private client: VyomaClient) {}\n\n  create(data: SandboxCreateRequest) {\n    return this.client.request<SandboxCreateResponse>(\n      \"/api/sandbox/create\",\n      {\n        method: \"POST\",\n        body: JSON.stringify(data),\n      }\n    );\n  }\n\n  stop(sandboxId: string) {\n    return this.client.request<SandboxStopResponse>(\n      \"/api/sandbox/stop\",\n      {\n        method: \"POST\",\n        body: JSON.stringify({ sandboxId }),\n      }\n    );\n  }\n\n  status(sandboxId: string) {\n    return this.client.request<SandboxStatusResponse>(\n      `/api/sandbox/status?sandboxId=${sandboxId}`,\n      {\n        method: \"GET\",\n      }\n    );\n  }\n\n  write(\n    sandboxId: string,\n    path: string,\n    content: string\n  ) {\n    return this.client.request<SandboxWriteResponse>(\n      \"/api/sandbox/write\",\n      {\n        method: \"POST\",\n        body: JSON.stringify({\n          sandboxId,\n          path,\n          content,\n        }),\n      }\n    );\n  }\n\n  exec(\n    sandboxId: string,\n    command: string,\n    cwd?: string\n  ) {\n    return this.client.request<SandboxExecResponse>(\n      \"/api/sandbox/exec\",\n      {\n        method: \"POST\",\n        body: JSON.stringify({\n          sandboxId,\n          command,\n          cwd,\n        }),\n      }\n    );\n  }\n}\n","export class VyomaError extends Error {\n  status: number;\n  code?: string;\n\n  constructor(message: string, status: number, code?: string) {\n    super(message);\n    this.name = \"VyomaError\";\n    this.status = status;\n    this.code = code;\n  }\n}\n","import { SandboxResource } from \"../resources/sandbox\";\nimport { VyomaError } from \"./error\";\n\nexport interface VyomaClientOptions {\n  apiKey: string;\n  baseUrl?: string;\n}\n\nexport class VyomaClient {\n  private apiKey: string;\n  private baseUrl: string;\n\n  constructor(options: VyomaClientOptions) {\n    if (!options.apiKey) {\n      throw new Error(\"Vyoma API key is required\");\n    }\n\n    this.apiKey = options.apiKey;\n    this.baseUrl = options.baseUrl ?? \"http://sandboxd.nakul.space\";\n  }\n\n  async request<T>(path: string, options: RequestInit = {}): Promise<T> {\n    const res = await fetch(`${this.baseUrl}${path}`, {\n      ...options,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${this.apiKey}`,\n        ...(options.headers || {}),\n      },\n    });\n\n    if (!res.ok) {\n      const data = await res.json().catch(() => null);\n      throw new VyomaError(\n        data?.error ?? \"Vyoma API error\",\n        res.status,\n        data?.code\n      );\n    }\n\n    return res.json() as Promise<T>;\n  }\n  sandbox = new SandboxResource(this);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACUO,IAAM,kBAAN,MAAsB;AAAA,EAC3B,YAAoB,QAAqB;AAArB;AAAA,EAAsB;AAAA,EAE1C,OAAO,MAA4B;AACjC,WAAO,KAAK,OAAO;AAAA,MACjB;AAAA,MACA;AAAA,QACE,QAAQ;AAAA,QACR,MAAM,KAAK,UAAU,IAAI;AAAA,MAC3B;AAAA,IACF;AAAA,EACF;AAAA,EAEA,KAAK,WAAmB;AACtB,WAAO,KAAK,OAAO;AAAA,MACjB;AAAA,MACA;AAAA,QACE,QAAQ;AAAA,QACR,MAAM,KAAK,UAAU,EAAE,UAAU,CAAC;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,OAAO,WAAmB;AACxB,WAAO,KAAK,OAAO;AAAA,MACjB,iCAAiC,SAAS;AAAA,MAC1C;AAAA,QACE,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AAAA,EAEA,MACE,WACA,MACA,SACA;AACA,WAAO,KAAK,OAAO;AAAA,MACjB;AAAA,MACA;AAAA,QACE,QAAQ;AAAA,QACR,MAAM,KAAK,UAAU;AAAA,UACnB;AAAA,UACA;AAAA,UACA;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAAA,EAEA,KACE,WACA,SACA,KACA;AACA,WAAO,KAAK,OAAO;AAAA,MACjB;AAAA,MACA;AAAA,QACE,QAAQ;AAAA,QACR,MAAM,KAAK,UAAU;AAAA,UACnB;AAAA,UACA;AAAA,UACA;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AACF;;;AC7EO,IAAM,aAAN,cAAyB,MAAM;AAAA,EAIpC,YAAY,SAAiB,QAAgB,MAAe;AAC1D,UAAM,OAAO;AACb,SAAK,OAAO;AACZ,SAAK,SAAS;AACd,SAAK,OAAO;AAAA,EACd;AACF;;;ACFO,IAAM,cAAN,MAAkB;AAAA,EAIvB,YAAY,SAA6B;AA8BzC,mBAAU,IAAI,gBAAgB,IAAI;AA7BhC,QAAI,CAAC,QAAQ,QAAQ;AACnB,YAAM,IAAI,MAAM,2BAA2B;AAAA,IAC7C;AAEA,SAAK,SAAS,QAAQ;AACtB,SAAK,UAAU,QAAQ,WAAW;AAAA,EACpC;AAAA,EAEA,MAAM,QAAW,MAAc,UAAuB,CAAC,GAAe;AACpE,UAAM,MAAM,MAAM,MAAM,GAAG,KAAK,OAAO,GAAG,IAAI,IAAI;AAAA,MAChD,GAAG;AAAA,MACH,SAAS;AAAA,QACP,gBAAgB;AAAA,QAChB,eAAe,UAAU,KAAK,MAAM;AAAA,QACpC,GAAI,QAAQ,WAAW,CAAC;AAAA,MAC1B;AAAA,IACF,CAAC;AAED,QAAI,CAAC,IAAI,IAAI;AACX,YAAM,OAAO,MAAM,IAAI,KAAK,EAAE,MAAM,MAAM,IAAI;AAC9C,YAAM,IAAI;AAAA,QACR,MAAM,SAAS;AAAA,QACf,IAAI;AAAA,QACJ,MAAM;AAAA,MACR;AAAA,IACF;AAEA,WAAO,IAAI,KAAK;AAAA,EAClB;AAEF;","names":[]}